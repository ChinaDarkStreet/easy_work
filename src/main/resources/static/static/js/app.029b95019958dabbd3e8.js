webpackJsonp([1],{"34+y":function(t,e){},"4ORj":function(t,e){},"5vLp":function(t,e){},"6aeu":function(t,e){},"9kSZ":function(t,e){},DTWq:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("d8/S");var i=n("clQT"),a=n.n(i),s=(n("tvR6"),n("qBF2")),r=n.n(s),o=(n("lrMw"),n("7YS2")),u=n.n(o),l=(n("y+mr"),n("3JdW")),d=n.n(l),c=(n("6aeu"),n("PJK7")),m=n.n(c),f=(n("q/am"),n("4VPn")),_=n.n(f),p=(n("XDqQ"),n("Axha")),h=n.n(p),v=n("7+uW"),b=n("mtWM"),k=n.n(b),x={name:"App",mounted:function(){this._isMobile()?this.$router.replace("/m_index"):this.$router.replace("/pc_index"),this.$store.dispatch("init",[{id:2,name:"学英语",step:2,done:2,allNum:100,note:"没事",user:1,cutOffWeek:0,cutOffMonth:0,cutOffSeason:1,hold:10},{id:1,name:"学高数",step:1,done:5,allNum:10,note:"没事",user:1,cutOffWeek:0,cutOffMonth:0,cutOffSeason:1,hold:5}]),this.$store.dispatch("initReminders",[{time:"06:00",res:["带饭","带好吃的","洗头","说早安"]},{time:"11:25",res:["吃午饭","热饭盒","充电瓶车"]},{time:"21:45",res:["记账","洗漱","说晚安"]},{time:"5:25",res:["买鸡蛋","买菜","接小美女"]}])},methods:{_isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}}},w={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var g=n("VU/8")(x,w,!1,function(t){n("OH9y")},null,null).exports,y=n("/ocq"),C=n("Dd8w"),$=n.n(C),V={name:"Item",data:function(){return{}},props:{item:Object,index:Number},methods:{add_done:function(){this.$store.dispatch("add_done",this.index)}},computed:{rate:function(){return parseInt(100*this.item.done/this.item.allNum)}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"my-li"},[n("div",{staticClass:"item-title"},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple task_name"},[t._v(t._s(t.item.name))])]),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-row",{staticClass:"row-bg bt-group",attrs:{type:"flex",justify:"end"}},[n("el-tag",{attrs:{size:"medium"}},[t._v("连续"+t._s(t.item.hold)+"天")]),t._v(" "),n("el-tag",{attrs:{size:"medium"}},[t._v("周中断"+t._s(t.item.cutOffWeek)+"天")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:t.add_done}},[t._v("+")])],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"item-progress"},[n("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.rate}})],1)])},staticRenderFns:[]};var N=n("VU/8")(V,I,!1,function(t){n("NUVt")},"data-v-65bc6ea5",null).exports,O={name:"Reminder",data:function(){return{inputVisible:!1,inputValue:""}},props:{re:Object,index:Number},methods:{delete_re:function(){this.$store.dispatch("delete_time_re",{index:this.index,id:this.re.id})},handleClose:function(t,e){this.$store.dispatch("splice_re",{sub_index:t,index:this.index,reId:e})},handleInputConfirm:function(){var t=this.inputValue;t&&this.$store.dispatch("push_re",{inputValue:t,index:this.index,trId:this.re.id}),this.inputVisible=!1,this.inputValue=""},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){console.info(t.$refs),t.$refs.saveTagInput.$refs.input.focus()})}}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time_re"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"bottom"}},[n("el-tag",{staticClass:"my_bt",attrs:{type:"info"},on:{click:t.delete_re}},[t._v(t._s(t.re.time))])],1),t._v(" "),t._l(t.re.res,function(e,i){return n("el-tag",{key:i,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return t.handleClose(i,e.id)}}},[t._v("\n    "+t._s(e.reminder)+"\n  ")])}),t._v(" "),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+")])],2)},staticRenderFns:[]};var T=n("VU/8")(O,M,!1,function(t){n("wMam")},"data-v-910fb78e",null).exports,R=n("NYxO"),z={format_time:function(t){var e=t.split(":");return this.format_num(parseInt(e[0]))+":"+this.format_num(parseInt(e[1]))},format_num:function(t){return t<10?"0"+t:""+t},get_time_num:function(t,e){var n=t.split(":"),i=60*parseInt(n[0])+parseInt(n[1]);return i>e?i:i+1440}},j={name:"Home",data:function(){return{holder_text:"",show_err:!1,inputValue:"",inputVisible:!1,dialogVisible:!1,form:{name:"",step:1,allNum:10,note:""},rules:{name:[{required:!0,message:"计划名称不能为空",trigger:"blur"}]}}},methods:{addTask:function(){this.dialogVisible=!1;var t=this.form;this.$store.dispatch("addTask",{name:t.name,allNum:t.allNum,step:t.step,note:t.note}),this.form.allNum=10,this.form.note="",this.form.step=1,this.form.name=""},show_task_add:function(){this.dialogVisible=!0},focus_time_re:function(){this.show_err=!1},show_time_re_add:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.input_time_re.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;if(t){/^[012]?\d:[012345]?\d$/.test(t)?(this.$store.dispatch("push_time_re",z.format_time(t)),this.inputVisible=!1,this.inputValue=""):(this.show_err=!0,this.inputValue="",this.holder_text=t)}}},components:{Item:N,Reminder:T},computed:$()({},Object(R.b)(["tasks"]),Object(R.b)(["reminders"])),mounted:function(){}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"fir-row",attrs:{gutter:10}},[n("el-col",{attrs:{md:12}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("备忘")]),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.show_time_re_add}},[t._v("添加")])],1),t._v(" "),t.inputVisible?n("div",{staticClass:"time_re"},[n("el-input",{ref:"input_time_re",staticClass:"input-new-tag",attrs:{size:"small",placeholder:t.holder_text},on:{focus:function(e){return t.focus_time_re()},blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),t._v(" "),n("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.show_err,expression:"show_err"}],staticClass:"time_re_alert",attrs:{title:"时间格式不正确, 例 06:00",type:"error"}})],1):t._e(),t._v(" "),t._l(t.reminders,function(t,e){return n("Reminder",{key:e,attrs:{index:e,re:t}})})],2)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-dialog",{staticClass:"my_dialog",attrs:{title:"表单弹框",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",staticClass:"taskFrom",attrs:{rules:t.rules,model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"计划名称",prop:"name"}},[n("el-input",{attrs:{size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"计划步长"}},[n("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.form.step,callback:function(e){t.$set(t.form,"step",e)},expression:"form.step"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"计划总长"}},[n("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.form.allNum,callback:function(e){t.$set(t.form,"allNum",e)},expression:"form.allNum"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{size:"mini"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addTask}},[t._v("确 定")])],1)],1),t._v(" "),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("计划")]),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.show_task_add}},[t._v("添加")])],1),t._v(" "),t._l(t.tasks,function(t,e){return n("Item",{key:e,staticClass:"task_div",attrs:{item:t,index:e}})})],2)],1)],1)},staticRenderFns:[]};var E={name:"PCIndex",components:{Home:n("VU/8")(j,S,!1,function(t){n("bacy")},"data-v-2333e438",null).exports}},W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{staticClass:"container"},[e("el-header",[e("div")]),this._v(" "),e("el-main",[e("Home")],1),this._v(" "),e("el-footer",{staticClass:"footer"},[e("div")])],1)},staticRenderFns:[]};var F=n("VU/8")(E,W,!1,function(t){n("9kSZ")},"data-v-794d7971",null).exports,P=(n("34+y"),n("X+yh")),U=n.n(P),q={name:"MReminder",data:function(){return{add_input:!1,name:"",input_value:""}},methods:{delete_re:function(){this.$store.dispatch("delete_time_re",{index:this.index,id:this.re.id})},handleClose:function(t,e){this.$store.dispatch("splice_re",{sub_index:t,index:this.index,reId:e})},show_add_input:function(){var t=this;this.add_input=!0,this.$nextTick(function(e){t.$refs.add_input.focus()})},handleInputConfirm:function(){console.info("handleInputConfirm");var t=this.input_value;this.input_value="",t&&this.$store.dispatch("push_re",{inputValue:t,index:this.index,trId:this.re.id}),this.add_input=!1}},props:{re:Object,index:Number}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m_time_re"},[n("mt-button",{attrs:{size:"small",type:"primary"},on:{click:t.delete_re}},[t._v("\n    "+t._s(t.re.time)+"\n  ")]),t._v(" "),t._l(t.re.res,function(e,i){return n("mt-button",{key:i,attrs:{size:"small"},on:{click:function(n){return t.handleClose(i,e.id)}}},[t._v("\n    "+t._s(e.reminder)+"\n  ")])}),t._v(" "),n("mt-button",{directives:[{name:"show",rawName:"v-show",value:t.add_input,expression:"add_input"}],attrs:{size:"small"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input_value,expression:"input_value"}],ref:"add_input",staticClass:"my_input",domProps:{value:t.input_value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)},blur:t.handleInputConfirm,input:function(e){e.target.composing||(t.input_value=e.target.value)}}})]),t._v(" "),n("mt-button",{directives:[{name:"show",rawName:"v-show",value:!t.add_input,expression:"!add_input"}],attrs:{size:"small"},on:{click:t.show_add_input}},[t._v("\n    +\n  ")])],2)},staticRenderFns:[]};var D=n("VU/8")(q,H,!1,function(t){n("DTWq")},"data-v-57a1d4e9",null).exports,Q={name:"MTask",methods:{add_done:function(){this.$store.dispatch("add_done",this.index)}},props:{task:Object,index:Number},computed:{rate:function(){return parseInt(100*this.task.done/this.task.allNum)}}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mt-cell",{attrs:{title:t.task.name}},[n("span",[n("mt-button",{attrs:{size:"small"}},[t._v(t._s(t.task.hold))]),t._v(" "),n("mt-button",{attrs:{size:"small"}},[t._v(t._s(t.task.cutOffWeek))]),t._v(" "),n("mt-button",{attrs:{size:"small"},on:{click:t.add_done}},[t._v("+")])],1)]),t._v(" "),n("mt-progress",{attrs:{value:t.rate,"bar-height":9}},[n("div",{attrs:{slot:"end"},slot:"end"},[t._v(t._s(t.rate)+"%")])])],1)},staticRenderFns:[]};var B={name:"MIndex",data:function(){return{input_value:"",show_time_re_add_div:!1,holder_text:"",show_err:!1,active:"tab-container1",form:{name:"",step:1,allNum:10,note:""}}},methods:{add_task:function(){var t=this.form;t.name?(this.$store.dispatch("addTask",{name:t.name,allNum:t.allNum,step:t.step,note:t.note}),this.form.allNum=10,this.form.note="",this.form.step=1,this.form.name="",this.active="tab-container1"):U()("计划名称不能为空")},show_task_add:function(t){var e=this;t?(this.active="tab-container2",this.$nextTick(function(t){e.$refs.task_name.$refs.input.focus()})):(this.active="tab-container1",this.form.allNum=10,this.form.note="",this.form.step=1,this.form.name="")},show_time_re_add:function(){var t=this;this.show_time_re_add_div=!0,this.$nextTick(function(e){t.$refs.add_time_re.focus()})},add_time_re:function(){var t=this,e=this.input_value;if(e){/^[012]?\d:[012345]?\d$/.test(e)?(this.$store.dispatch("push_time_re",z.format_time(e)),this.show_time_re_add_div=!1,this.input_value=""):(U()("时间格式不正确, 例 06:00"),this.$nextTick(function(e){t.$refs.add_time_re.focus()}),this.input_value="",this.holder_text=e)}}},components:{MReminder:D,MTask:n("VU/8")(Q,A,!1,function(t){n("5vLp")},"data-v-2dc89fbc",null).exports},computed:$()({},Object(R.b)(["reminders"]),Object(R.b)(["tasks"]))},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mt-tab-container",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("mt-tab-container-item",{attrs:{id:"tab-container1"}},[n("ul",{staticClass:"m_ul"},[n("li",{staticClass:"m_time_re"},[n("mt-cell",{attrs:{title:"备忘"}},[n("mt-button",{attrs:{size:"small"},on:{click:t.show_time_re_add}},[t._v("添加")])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_time_re_add_div,expression:"show_time_re_add_div"}],staticClass:"m_time_re1"},[n("mt-button",{attrs:{size:"small"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input_value,expression:"input_value"}],ref:"add_time_re",staticClass:"my_input1",domProps:{value:t.input_value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_time_re(e)},blur:t.add_time_re,input:function(e){e.target.composing||(t.input_value=e.target.value)}}})])],1),t._v(" "),t._l(t.reminders,function(t,e){return n("MReminder",{key:e,attrs:{index:e,re:t}})})],2),t._v(" "),n("li",{staticClass:"m_tasks"},[n("mt-cell",{attrs:{title:"计划"}},[n("mt-button",{attrs:{size:"small"},on:{click:function(e){return t.show_task_add(!0)}}},[t._v("添加")])],1),t._v(" "),t._l(t.tasks,function(t,e){return n("MTask",{key:e,attrs:{index:e,task:t}})})],2)])]),t._v(" "),n("mt-tab-container-item",{attrs:{id:"tab-container2"}},[n("div",{staticClass:"my_form"},[n("mt-field",{ref:"task_name",attrs:{label:"计划名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("mt-field",{attrs:{label:"计划步长",type:"number"},model:{value:t.form.step,callback:function(e){t.$set(t.form,"step",e)},expression:"form.step"}}),t._v(" "),n("mt-field",{attrs:{label:"计划总长",type:"number"},model:{value:t.form.allNum,callback:function(e){t.$set(t.form,"allNum",e)},expression:"form.allNum"}}),t._v(" "),n("mt-field",{attrs:{label:"备注",rows:"4"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1),t._v(" "),n("div",[n("mt-button",{on:{click:t.add_task}},[t._v("确认")]),t._v(" "),n("mt-button",{on:{click:function(e){return t.show_task_add(!1)}}},[t._v("取消")])],1)])],1)},staticRenderFns:[]};var X=n("VU/8")(B,J,!1,function(t){n("4ORj")},"data-v-2296f685",null).exports;v.default.use(y.a);var Y,L=new y.a({routes:[{path:"",redirect:"/pc_index"},{path:"/pc_index",name:"PCIndex",component:F},{path:"/m_index",name:X,component:X}]}),Z=n("bOdI"),G=n.n(Z),K=(Y={},G()(Y,"init_tasks",function(t,e){e.data;k.a.get("/api/task").then(function(e){console.info(e),e.data.code&&(t.tasks=e.data.data)}).catch(function(e){t.tasks=[],console.info(e)})}),G()(Y,"init_reminders",function(t,e){e.data;k.a.get("/api/reminder").then(function(e){if(console.info(e),e.data.code){var n=new Date,i=60*n.getHours()+n.getMinutes()-10,a=e.data.data;a.sort(function(t,e){return z.get_time_num(t.time,i)-z.get_time_num(e.time,i)}),t.reminders=a}}).catch(function(e){t.reminders=[],console.info(e)})}),G()(Y,"splice_re",function(t,e){var n=e.sub_index,i=e.index,a=e.reId;console.info(a),k.a.delete("/api/reminder/"+a).then(function(e){return e.data.code?(t.reminders[i].res.splice(n,1),1):0}).catch(function(t){return console.info(t),t})}),G()(Y,"push_re",function(t,e){var n=e.inputValue,i=e.index,a=e.trId;k.a.post("/api/reminder",{reminder:n,trId:a}).then(function(e){return e.data.code?(t.reminders[i].res.push(e.data.data),1):0}).catch(function(t){return console.info(t),t})}),G()(Y,"push_time_re",function(t,e){var n=e.inputValue;k.a.post("/api/reminder/time",{time:n}).then(function(e){if(e.data.code){t.reminders.push({id:e.data.data.id,time:n,res:[]});var i=new Date,a=60*i.getHours()+i.getMinutes()-600;return t.reminders.sort(function(t,e){return z.get_time_num(t.time,a)-z.get_time_num(e.time,a)}),1}return 0}).catch(function(t){return console.info(t),t})}),G()(Y,"delete_time_re",function(t,e){var n=e.index,i=e.id;k.a.delete("/api/reminder/time/"+i).then(function(e){return e.data.code?(t.reminders.splice(n,1),1):0}).catch(function(t){return console.info(t),t})}),G()(Y,"add_done",function(t,e){var n=e.index,i=t.tasks[n],a=i.done+i.step;a>=i.allNum?k.a.delete("/api/task/"+i.id).then(function(e){return e.data.code?(t.tasks.splice(n,1),1):0}).catch(function(t){return console.info(t),t}):(i.done=a,k.a.put("/api/task/"+i.id+"?done="+a).then(function(t){return t.data.code?1:0}).catch(function(t){return console.info(t),t}))}),G()(Y,"addTask",function(t,e){e.done=0,e.cutOffWeek=0,e.cutOffMonth=0,e.cutOffSeason=0,e.hold=0,k.a.post("/api/task",e).then(function(n){return n.data.code?(t.tasks.push(e),1):0}).catch(function(t){return console.info(t),t})}),Y),tt={init:function(t,e){var n=t.commit;console.info("action - init"),n("init_tasks",{data:e})},initReminders:function(t,e){var n=t.commit;console.info("action - initReminders"),n("init_reminders",{data:e})},splice_re:function(t,e){(0,t.commit)("splice_re",{sub_index:e.sub_index,index:e.index,reId:e.reId})},push_re:function(t,e){(0,t.commit)("push_re",{inputValue:e.inputValue,index:e.index,trId:e.trId})},push_time_re:function(t,e){(0,t.commit)("push_time_re",{inputValue:e})},delete_time_re:function(t,e){(0,t.commit)("delete_time_re",{index:e.index,id:e.id})},add_done:function(t,e){(0,t.commit)("add_done",{index:e})},addTask:function(t,e){(0,t.commit)("addTask",e)}};v.default.use(R.a);var et=new R.a.Store({state:{tasks:[],reminders:[]},mutations:K,actions:tt,getters:{}});n("Qbok");v.default.component(h.a.name,h.a),v.default.component(_.a.name,_.a),v.default.component(m.a.name,m.a),v.default.component(d.a.name,d.a),v.default.component(u.a.name,u.a),v.default.config.productionTip=!1,v.default.use(r.a),v.default.use(a.a),new v.default({el:"#app",router:L,components:{App:g},template:"<App/>",store:et})},NUVt:function(t,e){},OH9y:function(t,e){},Qbok:function(t,e){},XDqQ:function(t,e){},bacy:function(t,e){},"d8/S":function(t,e){},joTY:function(t,e){},lrMw:function(t,e){},"q/am":function(t,e){},tvR6:function(t,e){},wMam:function(t,e){},"y+mr":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.029b95019958dabbd3e8.js.map